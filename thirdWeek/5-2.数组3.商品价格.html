<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="author" content="智能社 - zhinengshe.com" />
<meta name="copyright" content="智能社 - zhinengshe.com" />
<title>智能社 - www.zhinengshe.com</title>
<style>
body {text-align:center;}
</style>
</head>

<body>
输入原始文本(空格隔开)：<br>
<textarea style="width:300px; height:200px;" id="txt1">冰红茶-3元,冰绿茶-2.5元,橙汁-1.5元,葡萄汁-5毛,柠檬汁-1.5元,芒果汁-30毛,柠檬汁-1.5元,柠檬汁-1.5元,柠檬汁-1.5元,柠檬汁-1.5元</textarea><br>
<br>
<input type="button" value="变" id="btn1" /><br>
<br>
这里输出结果：<br>
<textarea style="width:300px; height:200px;" id="txt2"></textarea>
<script type="text/javascript">
var oT1=document.getElementById('txt1');
var oT2=document.getElementById('txt2');
var oBtn=document.getElementById('btn1');
oBtn.onclick=function(){
	var str=oT1.value;
	var arr=str.split(',');
	var json={};
	var json2={};
	for(var i=0;i<arr.length;i++){
		var arr2=arr[i].split('-');
		if(json[arr2[0]]){
			json[arr2[0]]++;
		}else{
			json[arr2[0]]=1;
		}

		if(arr2[1].substring(arr2[1].length-1)=='毛'){
			arr2[1]=parseFloat(arr2[1])/10;
		}else{
			arr2[1]=parseFloat(arr2[1]);
		}
		var p=arr2[1];
		json2[arr2[0]]=p;
	}
	var count=0;
	for(var i in json){
		oT2.value+=i+'('+json[i]+')￥'+json2[i]*json[i]+'\n';
		count+=json[i]*json2[i];
	}
	oT2.value+='总价：'+count;
}
</script>
</body>
</html>
